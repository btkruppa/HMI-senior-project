<!DOCTYPE html>
<script>


$(document).ready(function(){

var plcReadId = [];
var plcReadCoil = []
var readCount = 0;

$.ajax({
  dataType: "json",
  url: config.server + "trial.json",
  method: "GET",
  cache: false,
    success: function(events){
      window.items = events;
      var screenPage = "";
      for (var k = 0; k < events.length; k++){
        id = events[k].id
        if(events[k].type == "text"){
          $("#screen1").append("<div id = \"item" + id + "\"></div>");
          $("#item"+id).css("border", events[k].border);
          $("#item"+id).css("color", events[k].color);
          $("#item"+id).text(events[k].title);
        }
        else if(events[k].type == "button"){
          $("#screen1").append("<button type=\"button\" onclick=\"alert('Hello world!')\" id = \"item" + id + "\">"+ events[k].title + "</button>");
        }
        else if(events[k].type == "img"){
          $("#screen1").append("<img src=\"" + events[k].image + "\" id = \"item" + id + "\">")
        }
        if(events[k].plc == "read"){
          plcReadId[readCount] = events[k].id
          plcReadCoil[readCount] = events[k].coil;
          readCount++
        }
        $("#item"+id).css("position", "absolute");
        $("#item"+id).css("left", events[k].left + events[k].unit1);
        $("#item"+id).css("top", events[k].top + events[k].unit2);
        $("#item"+id).css("width", events[k].width + events[k].unit3);
        $("#item"+id).css("height", events[k].height + events[k].unit4);
        $("#item"+id).mousedown(function(event) {
          window.testing = $(this);
          switch (event.which) {
              case 1:
                  //alert('Left Mouse button pressed.');
                  break;
              case 2:
                  //alert('Middle Mouse button pressed.');
                  break;
              case 3:
                  //lert('Right Mouse button pressed.');
                  window.location.href = "#/EditElement/"+ this.id;
                  break;
              default:
                  alert('You have a strange Mouse!');
          }
        });
      }


    //  $("#screen1").text(screenPage);
  }
  });
  setInterval(function(){
  for(var i = 0; i<readCount; i++){
    var coil = plcReadCoil[i]
    window.coiltest = plcReadCoil;
    $.ajax({
      dataType: "json",
      url: config.server + "/coil/" + coil +"/" + i,
      method: "GET",
      cache: false,
        success: function(events){
          window.coils = events;
          $("#item"+plcReadId[events.id]).text(events.coil);
        }
      })
  }
},100)

});
</script>

<div id = "screen1"></div>
